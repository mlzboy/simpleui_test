<!doctype html>
{% load staticfiles %}
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>Document</title>
  <style type="text/css">
@font-face {
  font-family: 'iconfont';  /* project id 2241826 */
  src: url('//at.alicdn.com/t/font_2241826_x6mn5502j8e.eot');
  src: url('//at.alicdn.com/t/font_2241826_x6mn5502j8e.eot?#iefix') format('embedded-opentype'),
  url('//at.alicdn.com/t/font_2241826_x6mn5502j8e.woff2') format('woff2'),
  url('//at.alicdn.com/t/font_2241826_x6mn5502j8e.woff') format('woff'),
  url('//at.alicdn.com/t/font_2241826_x6mn5502j8e.ttf') format('truetype'),
  url('//at.alicdn.com/t/font_2241826_x6mn5502j8e.svg#iconfont') format('svg');
}


.iconfont {
  font-family: "iconfont" !important;
  font-size: 20px;
  font-style: normal;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}


  body{margin:0;padding:0;}
	.top{
    height:50px;
    background-color: green;
    /* z-index: 10; */
  }
  .main{
    display:flex;
    flex-direction: row;
    justify-content: space-between;
    height:600px;
    min-height: 100vh;
    /* background-color: gray; */
  }
  .left{
    /* width:800px; */
    background-color:yellow;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  }
  .middle{
    width:100%;
    background-color:green;
    display:flex;
    flex-direction: column;
    justify-content: flex-start;
    min-height: 100vh;
    }
  .right1{
    width:200px;
    background-color:yellow;
  } 
  .right2{
    width:200px;
    background-color:red;
  } 
  .editor{
    display: flex;
    flex-direction: row;
    justify-content:space-between;
    /* min-height: 100vh; */
    /* height:100vh-400px; */
    flex-grow:1

  }
  .z{
    background-color:white;
    width:500px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  }
  .y{
    display:flex;
    flex-direction: column;
    justify-content:space-between;
    background-color:pink;
    flex-grow:1
  }
  .s{
    background-color:blue;
  /* height:900px; */
  flex-grow:1;
  }
  .x{background-color:gray;
  /* flex-grow:1; */
  height: 80px;
  }
  .question{color:white;height:35px;text-align: center;line-height: 35px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  margin:0 20px;
  }
  .easy{color:lightgreen}
  .normal{color:orange}
  .hard{color:red}
  /* #drap-line {position: absolute;top: 0;right: 0;width: 4px;height: 100%;background-color: #999;cursor: e-resize;} */
  #drap-line {width: 2px;height: 100%;background-color:gray;cursor: e-resize;z-index: 100;}
.over{background-color: gray;}
.sub_menus{
  display: flex;
  flex-direction: row;
  justify-content:flex-start;
}
.sub_menu{width:100px;height:25px;line-height: 25px;text-align: center;
background-color: lightgray;
/* border:gray 1px solid; */
font-size:16px;margin:0px;padding:10px;}
.over2{background-color: white;}
.content{display: none;}
.over3{display: block;}
</style>
<script src="/static/jquery.min.js"></script>
<script type="text/javascript">
console.log("zzz")
  $(function(){

$(".sub_menu").click(function(e,i){
  console.log("eeeeeeeeeee,iiiiii",e,i)
  console.log($(this).attr("n"))
  let new_n = parseInt($(this).attr("n"))
  let old_n = parseInt($("#lastn").val())
  console.log(new_n,old_n)

  $($(".content")[parseInt($(this).attr("n"))]).show()
  if (new_n != old_n)
  {
    $($(".content")[old_n]).hide()
    $($(".sub_menu")[old_n]).removeClass("over2")

  }
    $("#lastn").val(new_n.toString())
    $($(".sub_menu")[new_n]).addClass("over2")

})

  // $(".question").mouseover(function(){
  //   $(".question").css("background-color","gray");
  // });
  // $(".question").mouseout(function(){
  //   $(".question").css("background-color","#262626");
  // });

  $( ".question" ).bind( "mouseenter mouseleave", function( event ) {
$( this ).toggleClass( "over" );
});


      console.log("zzz")
      $("#left_menu").click(function(){
          console.log("zzzzz")
          // $("#left").css("width","800px")
          $("#left").toggle()
      })

      var isDown = false; 
var minwidth = 500; 
var maxwidth = 1000; 
$("#drap-line").mousedown(function() 
{ 
// this.setCapture(); 
isDown = true; 
// $("body").css("cursor", "e-resize"); 
}); 
$("body").mouseup(function () 
{ 
// this.releaseCapture(); 
isDown = false; 
$("body").css("cursor", "default"); 
}); 
$("body").mousemove(function (event) 
{ 
if (isDown) { 
$("body").css("cursor", "e-resize"); 

var _mx = event.clientX; 
//var _my = event.clientY; 
var _poin = $("#drap-line").offset(); 
var _w = _mx - _poin.left; 
var _lw = $("#z").width(); 
var _rw = $("#y").width(); 
if ((_lw + _w > minwidth && _w < 0) || (_lw + _w < maxwidth && _w > 0)) { 
$("#z").width(_lw + _w); 
$("#y").width(_rw - _w); 
} 
else { 
if (_w > 0) { 
$("#z").width(maxwidth); 
$("#y").width(_rw - (maxwidth - _lw)); 
} 
else { 
$("#z").width(minwidth); 
$("#y").width(_rw + (_lw - minwidth)); 
} 
} 
} 
}); 

    //   		//设置最大/最小宽度
		// var max_width = 400,
		// 	min_width = 200;
 

    


		// //获取dom
		// var	drapLine = $('#drap-line'),
		// 	left = $('#left'),
		// 	right = $('#middle');
 
		// //记录鼠标相对left盒子x轴位置
		// var mouse_x = 0;
 
		// //鼠标移动事件
		// function mouseMove(e) {
		// 	var e = e || window.event;
		// 	var left_width = e.clientX - mouse_x;
		// 	left_width = left_width < min_width ? min_width : left_width;
		// 	left_width = left_width > max_width ? max_width : left_width;
		// 	// left.style.width = left_width + 'px';
    //   // right.style.left = left_width + 'px';
    //   left.css({"width":left_width+"px"});
		// }
		// //终止事件
		// function mouseUp() {
		// 	document.onmousemove = null;
		// 	document.onmouseup = null;
		// 	//localStorage设置
		// 	localStorage.setItem('sliderWidth', left.style.width)
    // }
    

    // 			//localStorage读取
		// 	var history_width = localStorage.getItem('sliderWidth');
		// 	if (history_width) {

    //     left.css({"width":history_width+"px"});

		// 		// left.style.width = history_width;
		// 		// right.style.left = history_width;
		// 	}
		// 	//绑定鼠标按下事件
		// 	drapLine.onmousedown = function (e) {
		// 		var e = e || window.event;
		// 		//阻止默认事件
		// 		e.preventDefault();
		// 		mouse_x = e.clientX - left.offsetWidth;
		// 		document.onmousemove = mouseMove;
		// 		document.onmouseup = mouseUp;
		// 	}


  })
  console.log("bbb")
</script>
<!--必须写-->
<link rel="stylesheet" href="{% static 'codemirror-5.58.2/lib/codemirror.css' %}">
<script src="{% static 'codemirror-5.58.2/lib/codemirror.js' %}"></script>
<!--要编辑的语言对应的 js 文件-->
<!--<script type="text/javascript" src="{% static 'codemirror-5.58.2/mode/python/python.js' %}"></script>-->
<script type="text/javascript" src="/static/codemirror-5.58.2/mode/python/python.js"></script>

<!--引入css文件，用以支持主题-->
<!--<link rel="stylesheet" href="{% static 'codemirror-5.58.2/theme/dracula.css' %}"/>-->
<link rel="stylesheet" href="/static/codemirror-5.58.2/theme/dracula.css"/>

<style type="text/css">a {text-decoration: none}</style>
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>-->
<link rel="stylesheet" href="/static/bootstrap.min.css">
<script src="/static/jquery.min.js"></script>
<script src="/static/bootstrap.min.js"></script>

 </head>
 <body>
  <div class="main">
    <div class="left" id="left">
      <div id="menu" style="background-color: #262626;width:600px;">
        <div class="inner_menu" style="text-align: center;margin:10px;">
          <input type="button" name="pre" value="上一页" />
          <input type="button" name="next" value="下一页" />
        </div>
        <div class="questions">
          {%for q in questions%}
          {% if q.display %}
          <div class="question">
            <span>
              <a href="/questions/all/?id={{q.id}}">
                {{q.id}}.{{q.title}}
              </a>
            </span>
            <span>{% for tag in q.tags.all%}{{tag}}{%endfor%}</span>
            <span class="easy">
              <a href="">
                {{q.difficulty}}</a></span>
          </div>
          {% endif %}
          {%endfor%}
        </div>
      </div>

      <!-- <div id="drap-line"><span class="iconfont" style="color:gray;position: relative;top:80px;left:-10px;z-index: 100;">&#xe63b;</span></div> -->
      
    </div>
    <div class="middle">
      <div class="top">
      <input type="button" id="left_menu" name="left_menu" value="题目" />
      </div>
      <div class="editor">
        <div class="z" id="z">
          <div>
            <input type="hidden" name="lastn" id="lastn" value="0" />
            <div class="sub_menus">
              <span class="sub_menu over2" n="0">题目描述</span>
              <span class="sub_menu" n="1">知识点</span>
              <span class="sub_menu" n="2">视频讲解</span>
              <span class="sub_menu" n="3">相关习题</span>
            </div>
            <!--4个里显示一个-->
            <div class="content over3">
              <div>{%if question%}
                  {{question.title}}
                {%endif%}</div>
              <hr />
              <div>{% autoescape off %}
                  {%if question%}
                    {{question.question}}
                  {%endif%}
                {% endautoescape %}</div>
            </div>
            <div class="content">
              <div>title2</div>
              <hr />
              <div>content</div>
            </div>
            <div class="content">
              <div>title3</div>
              <hr />
              <div>content</div>
            </div>
            <div class="content">
              <div>title4</div>
              <hr />
              <div>content</div>
            </div>
          </div>
<!--          <div id="drap-line">11</div>-->

        </div>
        <div class="y" id="y">
          <form name="form1" method="post" action="/questions/{{question.id}}/submit_action/">
            <div class="s">
                {% csrf_token %}
                <div class="page-body">
                  <textarea name="data"  autocomplete="off" id="code">{{data|default:default1}}</textarea>
                  <br />
                  <textarea name="shuchu" id="shuchu" autocomplete="off">{{code_output|default:"运行结果"}}</textarea>
                  <br />
                  <textarea id="daan" name="daan" rows="15" cols="50" readonly style="display:none">{%if question%}{{question.right_answer}}{%endif%}</textarea>
                  <table width="60%" border="0" cellspacing="0" cellpadding="0" style="margin:0 15px 0 15px">
                    <tr>
                      <td width="50%">示例1</td>
                      <td width="50%">运行结果</td>
                    </tr>
                    <tr>
                      <td width="50%"><textarea name="sl1" rows="2" cols="15" readonly>{{question.example1}}</textarea>&nbsp;</td>
                      <td width="50%">
                          {% if sl1_output == 'True' %}
                          <font size="6" color="green">{{sl1_output}}</font>
                          {% elif sl1_output == 'False' %}
                          <font size="6" color="red">{{sl1_output}}</font>
                          {% else %}
                          <font color="red">{{sl1_output}}</font>
                          {% endif %}
                      </td>
                    </tr>
                    <tr>
                      <td width="50%">示例2</td>
                      <td width="50%"></td>
                    </tr>
                    <tr>
                      <td width="50%"><textarea name="sl2" rows="2" cols="15" readonly>{{question.example2}}</textarea>&nbsp;</td>
                      <td width="50%">
                          {% if sl2_output == 'True'%}
                          <font size="6" color="green">{{sl2_output}}</font>
                          {% else %}
                          <font size="6" color="red">{{sl2_output}}</font>
                          {% endif %}
                      </td>
                    </tr>
                    <tr>
                      <td width="50%">示例3</td>
                      <td width="50%"></td>
                    </tr>
                    <tr>
                      <td width="50%"><textarea name="sl3" rows="2" cols="15" readonly>{{question.example3}}</textarea>&nbsp;</td>
                      <td width="50%">
                          {% if sl3_output == 'True'%}
                          <font size="6" color="green">{{sl3_output}}</font>
                          {% else %}
                          <font size="6" color="red">{{sl3_output}}</font>
                          {% endif %}
                      </td>
                    </tr>
                    <tr>
                      <td width="50%">示例4</td>
                      <td width="50%"></td>
                    </tr>
                    <tr>
                      <td width="50%"><textarea name="sl4" rows="2" cols="15" readonly>{{question.example4}}</textarea>&nbsp;</td>
                      <td width="50%">
                          {% if sl4_output == 'True'%}
                              <font size="6" color="green">{{sl4_output}}</font>
                          {% else %}
                              <font size="6" color="red">{{sl4_output}}</font>
                          {% endif %}
                      </td>
                    </tr>
                  </table>
                </div>
            </div>
            <div class="x">
              <input type="submit" name="button" id="button" value="提交代码">
              <input type="button" name="button" id="zt" value="粘贴答案">
              <input type="button" name="button" id="da" value="显示答案">

            </div>
          </form>
        </div>

      </div>
    </div>

    <!-- <div class="right1">2222222222222</div>
    <div class="right2">2222222222222</div> -->
  </div>

 <script>
    //通过button按钮的id获取点击事件
    document.getElementById("da").onclick = function () {
        //使用if判断，判断button按钮的value属性
        if (this.value === "显示答案") {
            // 如果显示答案，那么点击后通过div盒子的id修改css样式
            document.getElementById("daan").style.visibility = "";
            //this关键字获取的是当前对象  通过this关键字来修改button的value值
            this.value = "隐藏答案";
        } else if (this.value === "隐藏答案") {
            // 如果是隐藏答案，那么点击后通过div盒子的id修改css样式
            document.getElementById("daan").style.visibility = "hidden";
            //this关键字获取的是当前对象  通过this关键字来修改button的value值
            this.value = "显示答案";
            }
        }
</script>
<script>
    //根据DOM元素的id构造出一个编辑器 设置些属性,充分利用一开始引入的那些文件
    var editor1 = CodeMirror.fromTextArea(document.getElementById("code"), {
        lineNumbers: true,  //显示行号
        theme: "dracula",  //设置主题
        indentUnit: 4,  //缩进单位，值为空格数，默认为2
    });
    var editor2 = CodeMirror.fromTextArea(document.getElementById("shuchu"), {
        lineNumbers: true,  //显示行号
        theme: "dracula",  //设置主题
        indentUnit: 4,  //缩进单位，值为空格数，默认为2
        readOnly: "nocursor",  //readOnly: boolean|string 编辑器是否只读。
        //如果设置为预设的值 “nocursor”，那么除了设置只读外，编辑区域还不能获得焦点。
        lineWrapping: true
    });


$(function(){
  $("#zt").click(function(){
    $("#code").val($("#daan").val())
    console.log("zt......")

    var text = document.form1.daan.value;
    console.log(text)

    editor1.setValue(text)
        setTimeout(() => {
          editor1.refresh()
        }, 1)


  })
})
</script>
</body>
</html>
